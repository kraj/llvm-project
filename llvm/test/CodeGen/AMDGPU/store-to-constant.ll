; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 5
; RUN: llc -mtriple=amdgcn-amd-amdhsa -mcpu=gfx90a %s -o - | FileCheck %s

define amdgpu_kernel void @store_as4(ptr addrspace(4) %out, i32 %a, i32 %b) {
; CHECK-LABEL: store_as4:
; CHECK:       ; %bb.0:
; CHECK-NEXT:    s_endpgm
  %r = add i32 %a, %b
  store i32 %r, ptr addrspace(4) %out
  ret void
}

define amdgpu_kernel void @memset_as4(ptr addrspace(4) %dst) {
; CHECK-LABEL: memset_as4:
; CHECK:       ; %bb.0:
; CHECK-NEXT:    s_endpgm
  call void @llvm.memset.p4.i64(ptr addrspace(4) %dst, i8 0, i64 256, i1 false)
  ret void
}

define amdgpu_kernel void @memcpy_to_as4(ptr addrspace(4) %dst, ptr %src) {
; CHECK-LABEL: memcpy_to_as4:
; CHECK:       ; %bb.0:
; CHECK-NEXT:    s_endpgm
  call void @llvm.memcpy.p4.p0.i32(ptr addrspace(4) %dst, ptr %src, i32 256, i1 false)
  ret void
}

define amdgpu_kernel void @store_as6(ptr addrspace(6) %out, i32 %a, i32 %b) {
; CHECK-LABEL: store_as6:
; CHECK:       ; %bb.0:
; CHECK-NEXT:    s_endpgm
  %r = add i32 %a, %b
  store i32 %r, ptr addrspace(6) %out
  ret void
}

define amdgpu_kernel void @memset_as6(ptr addrspace(6) %dst) {
; CHECK-LABEL: memset_as6:
; CHECK:       ; %bb.0:
; CHECK-NEXT:    s_endpgm
  call void @llvm.memset.p6.i64(ptr addrspace(6) %dst, i8 0, i64 256, i1 false)
  ret void
}

define amdgpu_kernel void @memcpy_to_as6(ptr addrspace(6) %dst, ptr %src) {
; CHECK-LABEL: memcpy_to_as6:
; CHECK:       ; %bb.0:
; CHECK-NEXT:    s_endpgm
  call void @llvm.memcpy.p6.p0.i32(ptr addrspace(6) %dst, ptr %src, i32 256, i1 false)
  ret void
}

; define amdgpu_kernel void @cmpxchg_to_as4(ptr addrspace(4) %dst, i32 %src) {
;   %void = cmpxchg ptr addrspace(4) %dst, i32 0, i32 %src seq_cst monotonic
;   ret void
; }

; define amdgpu_kernel void @atomicrmw_to_as4(ptr addrspace(4) %dst, i32 %src) {
;   %void = atomicrmw add ptr addrspace(4) %dst, i32 %src acquire
;   ret void
; }

; define amdgpu_kernel void @cmpxchg_to_as6(ptr addrspace(6) %dst, i32 %src) {
;   %void = cmpxchg ptr addrspace(6) %dst, i32 0, i32 %src seq_cst monotonic
;   ret void
; }

; define amdgpu_kernel void @atomicrmw_to_as6(ptr addrspace(6) %dst, i32 %src) {
;   %void = atomicrmw add ptr addrspace(6) %dst, i32 %src acquire
;   ret void
; }

declare void @llvm.memset.p4.i64(ptr addrspace(4) noalias nocapture writeonly, i8, i64, i1)
declare void @llvm.memset.p6.i64(ptr addrspace(6) noalias nocapture writeonly, i8, i64, i1)
declare void @llvm.memcpy.p4.p0.i32(ptr addrspace(4) noalias nocapture writeonly, ptr noalias nocapture readonly, i32, i1)
declare void @llvm.memcpy.p6.p0.i32(ptr addrspace(6) noalias nocapture writeonly, ptr noalias nocapture readonly, i32, i1)
